\chapter{Создание модели интеллектуальной системы принятия решений для регистрации и анализа проблемных ситуаций в ИТ-инфраструктуре предприятия} \label{chapt3}

В данной главе рассматриваются модели, которые были рассмотрены при выборе модели системы. Важно отметить, что работа над системой велась с 2011 года. Было выпущено 3 рабочих версии прототипа системы, реализующие различные модели мышления. 
\section{Модели мышления}
В работе было рассмотрено несколько созданных и испытанных моделей систем: \begin{itemize}
	\item Модель Menta 0.1 с использованием Деревьев Принятия Решений (Menta 0.1)
	\item Модель Menta 0.3 с использованием Генетических алгоритмов \cite{ArtificialIntelligence} 
	\item Модель TU 1.0, основанная на модели 6-ти Марвина Мински  \cite{EmotionMachine}
\end{itemize}

Модель на базе нейронных сетей (поддерживающая обучение) была отброшена на предварительной стадии оценки, так как имеет большие требования производительности \cite{NEURAL} несовместимые с Технико Экономическим Обоснованием \ref{Economic}.

%====================

%====================
\section{Модель Menta 0.1 с использованием Деревьев Принятия Решений} \label{sect3_1}
Данная модель являлась одной из первых, которая была опробована. Модель была основана на деревьях принятия решений \cite{DTREE}. В построение модели данной системы использовались следующие компоненты:
\begin{itemize}
	\item Обработка запросов на естественном языке
	\item Поиск решения
	\item Применение решения
	\item База знаний
\end{itemize}
Системы была ориентирована на выполнение простых команд, например, добавить поле на форму. Основаная функция модели представлена следующим потоком:
\begin{enumerate}
	\item Получение и формализация запроса
	\item Поиск решения при помощи Деревьев Принятия Решений
	\item Изменение модели приложения в формате OWL \cite{OWL}
	\item Генерация и компиляция приложения
\end{enumerate}

\subsection{База знаний на основе OWL}
В качестве базы знаний использовался owl-файл. С помощью редактора Protege \cite{Protege} в базу вводились данные о приложении в виде семантической сети. Для тестирование было создано приложение, которая выполняла функциональность по добавлению заказов в базу. На Рисунке \ref{img:order-owl} представлен класс Order в формате OWL. Слева отображаются супер классы, к которым он привязан. Например, BLL - класс относится к бизнес логики приложения, Module - отдельный модуль в рамках системы. Справа представлены свойства класса, их описание представлено в Таблице \ref{OrderPropertyDescription}. С помощью предикатов определяется поведение свойства: создать файл, создать новое поле. В Таблице \ref{Predicates} представлено описание иерархии предикатов. На Рисунке \ref{img:CreateCustomer} представлен класс CreateCustomer в OWL. Сюда входят описание всех необходимых свойств для генерации файла на языке Java.

\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {OrderOWL}
  \caption{Представление класса Order в OWL. Визуализация Protege.} 
  \label{img:order-owl}  
\end{figure}


\begin{table} [htbp]
  \centering
  \parbox{17cm}{\caption{Описание свойств класса Order в OWL}\label{OrderPropertyDescription}}
%  \begin{center}
  \begin{tabular}{| p{5cm} | p{5cm} | p{7cm} |}
  \hline
  \hline
Свойство & Предикат & Описание \\
  \hline
    \hline
OrderAmount	& hasFieldDefinition & Поле: сумма заказа \\
  \hline
orderidField	& hasFieldDefinition & Поле: идентификатор заказа \\
  \hline
Order.java	& hasFile & Идентификатор имени файла для генерации \\
  \hline
datePlaceField	& hasFieldDefinition & Поле: время размещения заказа \\
  \hline
    \end{tabular}
%  \end{center}
\end{table}

\begin{table} [htbp]
  \centering
  \parbox{15cm}{\caption{Описание иерархии предикатов}\label{Predicates}}
%  \begin{center}
  \begin{tabular}{| p{5cm} | p{7cm} |}
  \hline
  \hline
Предикат & Описание \\
  \hline
    \hline
 hasFieldDefinition & Предикат, обозначающий свойство класса \\
  \hline
 hasMethodDefinition & Предикат, обозначающий функцию \\
  \hline
classDefinition & Обозначение класса \\
  \hline
database & Обозначение базы данных\\
  \hline
    \end{tabular}
%  \end{center}
\end{table}

\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {CreateCustomer}
  \caption{Представление класса CreateCustiner в OWL. Визуализация Protege.} 
  \label{img:CreateCustomer}  
\end{figure}

\subsection{Основные компоненты модели}
Основными компонентами модели является:
\begin{enumerate}
	\item Request parser (Stanford parser)
	\item Генерация Action (Action Generator)
	\item Исполнение Action (Action Applier)
	\item Генерация приложения (Application Generator)
\end{enumerate}
\emph{Request parser} формализует запрос на естественном языке. \emph{Action Generator} генерирует Action объект из результатов работы парсера, основываясь на Деревьях принятия решений и базе данных. Основной задачей данного модуля является генерация имени модуля, действия и поля. Модуль \emph{Action Applier} ищет объект в модели по данным от Action Generator и производит действие, кроме того, используя предикат dependOn, он производит модификацию всех зависимых классов. В модели поддерживается два типа Action: RemoveFieldAction (удаление поля), AddFieldAction(добавление поля). После завершения работы производится генерация целевого приложения на языке Java при помощи OWL модели в модуле \emph{Application Generator}. На Рисунке \ref{img:MentaUseCase} представлена диаграмма последовательности для основного рабочего потока. \\
\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {MentaUseCase}
  \caption{Диаграмма последовательности для основного потока в модели Menta 0.1} 
  \label{img:MentaUseCase}  
\end{figure}

\subsection{Выводы по модели}
Основными проблемами данной модели являлось следующее:
\begin{enumerate}
	\item Отсутствие устойчивости к ошибкам входной информации: грамматическим и содержательным. Например, входной файл не имел отношения к программной системе, модель которой была в базе знаний в формате OWL
	\item Система поиска решения работала только в рамках модели одной программы
	\item Отсутствовала функция обучения 
\end{enumerate}
%===============================
%===============================
\section{Модель Menta 0.3 с использованием Генетических алгоритмов} \label{chapt2}
После работы над ошибками была предпринята попытка сделать поиск решения более универсальным. В данной модели был добавлен модуль логики для оценки решения и модуль генетических алгоритмов для генерации решения. В рамках данной модели были сформированы основные компоненты будущей модели:
\begin{itemize}
	\item Критерии Приемки (Acceptance Criteria)
	\item How-To для хранения решений проблем
	\item Формат данных OWL 
	\item Использование логических вычислений для проверки решения
\end{itemize}
Система содержала внутри себя модель приложения. При помощи генетического алгоритма модель строила из частей новую систему и проверяла ее при помощи логического движка \cite{NARS} соответствию входным критерия приемки. 
\subsection{Особенности решения}
Модель состоит из компонентов, представленных в Таблице \ref{ModulesMenta03}.

\begin{longtable}{|p{5cm}|p{10cm}|}
 \caption[Компонетны модели Menta 0.3]{Компонетны модели Menta 0.3}\label{ModulesMenta03} \\ 
 \hline
 
 \multicolumn{1}{|c|}{\textbf{Компонент}} & \multicolumn{1}{c|}{\textbf{Описание}}  \\ \hline 
\endfirsthead
\multicolumn{2}{c}%
{{\bfseries \tablename\ \thetable{} -- продолжение}} \\
\hline \multicolumn{1}{|c|}{\textbf{Компонент}} &
\multicolumn{1}{c|}{\textbf{Описание}}  \\ \hline 
\endhead

\hline \multicolumn{2}{|r|}{{Продолжение следует}} \\ \hline
\endfoot

\hline \hline
\endlastfoot
 MentaController & WebService, который предоставляет интерфейс для общения с пользователем и остальными системами \\
  \hline
 SolutionGenerator & Модуль отвечает за генерацию решения. На вход он получает Acceptance Criteria. Основой является генетический алгоритм. Для него был выбран framework ecj \cite{ECJ} . Из всех возможных классов в базе знаний, отсеянных по классификатору составляются паросочетания. К каждому паросочетанию применяется логическое суждение на основе AcceptanceCriteria (за это отвечает модуль ReasonerAdapter). В итоге паросочетание получает оченку в виде пары Frequency, Confidence (частота, вероятность). Таким образом находится максимально лучше паросочетание. Если его показатель 1,1, то решение принимается, иначе отбрасывается (на данный момент установлен жесткий показатель).SolutionGenerator включает в себя SolutionChecker, который включает в себя ReasonerAdapter. \\
  \hline
SolutionChecker & Проверка решения. Принимает на вход выбранные How-To, AcceptanceCriteria. Комбинирует их и передает ReasonerAdapter. \\
  \hline
ReasonerAdapter & Транслирует  How-To в термины NARS. NARS – non-axiomatic reasoning system \cite{NARS}. Система логических суждений, разработанная профессором Pei Wang. Принцип ее действия это всевозможная комбинация фактов. Каждый факт имеет свой frequency, confidence пару. И по сочетанием получается композиция данных фактов.\\
  \hline
  Translator & Транслирует объекты Базы Знаний – знания – в отчеты. Отчеты бывают следующих типов:
  \begin{itemize}
  	\item Solution Report
  	\item UML Report
  	\item Patch
  \end{itemize}В данной версии используется первый тип отчета. Этот отчет содержит описание решения, сгенерированного системой на выбранном языке программирования.\\
  \hline
  Applicator & Данный модуль применяет решение к модели приложения, содержащейся в базе знаний. Также данный модель включает FileApplicator, который генерирует решение в виде файлов на выбранном языке программирования. \\
  \hline
  KBServer & База знаний приложения. Используется сервер non-SQL БД HypergraphDB. \\
  \hline
%  \end{center}
\end{longtable}
\subsection{Выводы по модели}
Основными недостатками подхода оказалось:
\begin{itemize}
	\item Отсутсвие обучения
	\item Отсутсвие обработки естественного языка
	\item HyperGraphDB оказалась непригодный для промышленного использования
	\item NARS в виду своих особенностей оказался непригодным для промышленного применения на значительном объеме фактов (>20). Так как содержал в себе комбинаторный взрыв. Например при 10 фактов количество сочетаний будет равно 45 на первом уровне, далее будут сравнивать результаты этих сочетаний.  
\end{itemize}
Кроме того после апробации оказалось, что критерии приемки практически описывают необходимое решение, что являлось недопустимым. Данный подход был описан в статье \cite{SECR}.
%========================================
%========================================

\section{Модель TU 1.0, основанная на модели мышления 6-ти Марвина Мински}
Модель построенная с применением модели мышления Марвина Мински содержала в себе основные концепции предыдущих моделей и показала свою состоятельность на контрольных примерах.
\begin{itemize}
	\item Acceptance Criteria
	\item Обучение
	\item Поиск и применение решения 
	\item Отсутсвие обработки естественного языка
\end{itemize}
Данная модель является более абстрактной и представляется собой верхнеуровневую архитектуру обработки запроса (мышления), где компонентами являются лучшие части предыдущих систем.
\subsection{Крити-Селектор-Путь мышления}
В 2006 году Марвин Мински опубликовал свою книгу "The emotion machine" \cite{EmotionMachine}, в которой предложил свой взгляд на систему мышления и памяти человека. В основу теории легла парадигма триплета Критик-Селектор-Путь мышления, k-line для сопоставления знаний. На рисунке \ref{img:csw} представлена схематичное изображение Критика-Селектора-Пути мышления \\
\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {CSW}
  \caption{Критик-Селектор-Путь мышления} 
  \label{img:csw}  
\end{figure}

\textbf{Критик} представляет собой определенный триггер: внешние обстоятельства, события или иное воздействие. Например, включился свет и зрачки сузились. Обожглись и одернули руку. Критик активируется только когда для этого достаточно обстоятельств. Одновременно могут активироваться несколько критиков. Например, человек решает сложную задачу. Идет активация множество критиков: считать, технические детали, кроме того параллельно может активироваться критик переработки, сообщающей о необходимости отдыха.\\
\textbf{Селектор} занимается выбором определенных ресурсов, которыми также являются Пути мышления. \\
\textbf{Путь мышления} это способ решения проблемы. Путь мышления также может активировать следующий критик. \\

На рисунке \ref{img:csw_ex} представления расширенная модель работы триплета Критик-Селектор-Путь мышления. Критик активирует селектор, который активирует путь мышления (синий круг). Путь мышления в свою очередь может активировать критик или же совершить определенные действия. Например, зажегся зеленый свет светофора, значит можно переходить дорогу. \\
Если активировалось много критиков, значит проблему нужно уточнить, так как степень неопределенности слишком высока. Если проблема очень похожа, то можно судить по аналогии.
\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {CSW_EX}
  \caption{Критик-Селектор-Путь мышления в разрезе ресурсов} 
  \label{img:csw_ex}  
\end{figure}

\clearpage
\subsection{Уровни мышления}
Концепция уровней мышления представляет собой модель степени ментальной активности человека. Никто из людей не может похвастаться скоростью гепарда, гибкости кошки, силой медведя. Но наш вид все это компенсирует возможностью изобретения путей мышления. Например, чтобы быть быстрыми мы изобрели самолеты, машины. Чтобы быть сильными, мы изобрели оружие. Что же делает это возможным? Безусловно результатом всего является взаимодействие человека с окружающим миром. Именно данное взаимодействие заставляет людей изобретать что-то новое, создавать шедевры литературы и летать в космос. Но как же мы всего этого добиваемся начиная от инстинктивного одергивания руки до создания Теории всего \cite{Hawking}. Далее мы рассмотрим концепцию уровней мышления.
\begin{enumerate}
	\item Инстинктивный уровень
	\item Уровень обученных реакций
	\item Уровень рассуждений
	\item Рефлексивный уровень
	\item Саморефлексивный уровень
	\item Самосознательный уровень
\end{enumerate}

В Таблице \ref{ThinkingLevelDescription} представлено описание уровней мышления.
\begin{table} [htbp]
  \centering
  \parbox{15cm}{\caption{Описание уровней мышления Марвина Мински}\label{ThinkingLevelDescription}}
%  \begin{center}
  \begin{tabular}{| p{5cm} | p{11cm} |}
  \hline
  \hline
Уровень & Описание \\
  \hline
    \hline

Инстинктивный уровень	& На данном уровне происходят инстинктивные реакции (врожденные). Например, боязнь обжечься. Не прыгать под машину. Общую формулу для этого уровня можно выразить как "Если ..., то сделать так". \\
  \hline
Уровень обученных реакций  & На  данной уровне происходит мышление обученных реакций, то есть тех реакций, которыми человек обучается в течение жизни. Например, переходить дорогу на зеленых свет. Общую формулу для этого уровня можно выразить как "Если ..., то сделать так". \\
  \hline
Уровень рассуждений & а  данной уровне происходит мышление с использованием рассуждений. Если я сделаю так, то будет ... Например, если перебежать дорогу на зеленый свет, то можно успеть вовремя. На данном уровне сравниваются последствия нескольких решений и выбирается оптимальное. Общую формулу для этого уровня можно выразить как "Если ..., то сделать так, тогда будет так". \\
  \hline

Рефлексивный уровень  & На данном уровне происходит рассуждение с учетом анализа прошлых событий. Например, прошлый раз я побежал на моргающий зеленый и чуть не попал под машину. \\

  \hline
  Саморефлексивный уровень & На данном уровне происходит оценка себя. Строится определенная модель с помощью которой идет оценка своих поступков. Например, мое решение не пойти на это собрание было неверным, так как я упустил столько возможностей, я был легкомысленный. \\
  \hline
  Самосознательный уровень & Самозонательный уровень на данный момент характерен только для человека. На данном уровне идет оценка поступков человека с точки зрения высших идеалов и внешних оценок. Например, а что подумают мои друзья? А как бы поступил мой герой? \\
  \hline
  
  \end{tabular}
%  \end{center}
\end{table}

Деление на данные уровне носит условный характер. Например уровень 5 и 6 можно объединить. Но по словам Марвина Мински принцип бритвы Оккама успешно применяется в физики, но в психологии он не должен применяться также легко. \\
На рисунке \ref{img:thinkinglevels} представлена схематичное изображение уровней мышления. 1-3 уровни составляют личность человека. 2-5 представляют ЭГО человека (Человеческое Я) - осознание человека в общении с окружающими. 3-6 представляют собой сверх ЭГО человека (сверх Я) - его моральные установки.
\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {thinkinglevels}
  \caption{Иллюстрация концепции Уровней мышления} 
  \label{img:thinkinglevels}  
\end{figure}
\clearpage
\subsection{K-line}
Концепция K-line была первый раз упомянута Марвином Мински в 1987 году в журнале Cognitive Science. В книге "The Society of Mind" \cite{SocietyOfMind} Марвин Мински раскрывает концепцию K-line. Полностью концепция описана позже в книге "The Emotion Machine" \cite{EmotionMachine}. 
K-line представляет собой связь между двумя событиями, объединяющими их в знание. Например, объединение Пути мышления, найденного решения и активированной проблемы. Данная линия объединяет то как мы думали, решение.
\begin{figure} [h] 
  \center
  \includegraphics [scale=1.0] {k_line}
  \caption{Иллюстрация концепции K-line} 
  \label{img:k_line}  
\end{figure}
На Рисунке \ref{img:k_line} показана K-line, которая объединяет пути мышления, решение и другие Критики. Данная концепция позволяет "запоминать" удачные решения. 
\clearpage

\section{Выводы по Главе}
Для программной экспертной системы очень важно иметь способность мышления и рассуждения. Например, очень важно  для системы уметь действовать по аналогии. Так как множество запросов типичны и отличаются частностями. Например, пожалуйста, установить Office, Antivirus и т.д. \\
Также для экспертной системы важно уметь абстрагировать специализированные рецепты решения. Например, система научилась решать инцидент "Please install Firefox". Абcтрагировав данный инцидент до степени "Please install browser" система сможет теми же способами попробовать решить новый инцидент.\\
После рассмотрения нескольких моделей была выбрана модель мышления Марвина Мински, так как данная модель наиболее точно ложится на целевую область решения инцидентов в области IT. На основе модели мышления Мински была построена модель системы, которая поддерживает основные функции: обучение, понимание инцидента, поиск решения, применение решения. Более подробно с результатами апробации моделей можно ознакомиться на сайте http://tu-project.com

\clearpage

